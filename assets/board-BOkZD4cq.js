import{O as L}from"./index-CCSjWsne.js";import{u as P,C as y,f as R,a2 as S,N as F,ab as O,V as x,c as U,b as C}from"./useThreeRenderer-CSxgIZQ0.js";const N=()=>{const{containerRef:f,setAnimation:M}=P((v,G,d,A)=>{const o=new y("#00e9ec"),e=new R(100,100,100,100),E=new S({size:.5,transparent:!0,opacity:1,vertexColors:!0,color:16777215}),c=new Float32Array(e.attributes.position.count*3);for(let t=0;t<e.attributes.position.count;t++)c[t*3]=o.r,c[t*3+1]=o.g,c[t*3+2]=o.b;e.setAttribute("color",new F(c,3));const u=new O(e,E);v.add(u),d.position.set(0,0,100),A.enabled=!1;let w=!1,i=new x;const p=f.current;p.addEventListener("mousedown",t=>{w=!0,i.set(t.clientX/window.innerWidth*2-1,-(t.clientY/window.innerHeight)*2+1)}),p.addEventListener("mouseup",()=>{w=!1});const a=new U,n=new x,X=t=>{n.x=t.clientX/window.innerWidth*2-1,n.y=-(t.clientY/window.innerHeight)*2+1};window.addEventListener("mousemove",X);const j=()=>{const t=e.attributes.color;for(let r=0;r<e.attributes.position.count;r++)t.setXYZ(r,o.r,o.g,o.b);t.needsUpdate=!0},s=document.createElement("button");s.textContent="重置画板",s.style.position="absolute",s.style.top="50px",s.style.left="50%",s.style.transform="translateX(-50%)",s.addEventListener("click",j),p.appendChild(s);const m=new y("#ff0000");M(()=>{if(w){a.setFromCamera(n,d);const t=a.intersectObject(u);if(t.length>0){const r=e.attributes.color;t[0].index;const b=i.distanceTo(n);if(b>.01){const h=Math.ceil(b/.005);for(let l=0;l<=h;l++){const Y=C.lerp(i.x,n.x,l/h),B=C.lerp(i.y,n.y,l/h);a.setFromCamera({x:Y,y:B},d);const g=a.intersectObject(u);if(g.length>0){const I=g[0].index;r.setXYZ(I,m.r,m.g,m.b)}}r.needsUpdate=!0}i.copy(n)}}})});return L.jsx("div",{ref:f,style:{width:"100%",height:"100%"}})};export{N as default};
